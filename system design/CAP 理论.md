CAP 理论

CAP定理指出，一个分布式软件系统不可能同时提供以下三种保证中的两种以上（CAP）。一致性（Consistency）、可用性(Availability)和分区容忍度(Partition tolerance)。当我们设计一个分布式系统时，在CAP之间进行tradeoff几乎是我们要考虑的第一件事。CAP定理说，在设计一个分布式系统时，我们只能选择其中的两个。
一致性(Consistency)。所有节点在同一时间看到相同的数据。一致性是通过在允许进一步读取之前更新几个节点来实现的。
可用性(Availability)。每个请求在成功/失败时都能得到响应。可用性是通过在不同的服务器上复制数据来实现的。
分区容忍度(Partition tolerance)。尽管信息丢失或部分故障，系统仍能继续工作。一个具有分区容忍性的系统可以承受任何程度的网络故障，但不会导致整个网络的故障。数据在节点和网络的组合中被充分复制，以使系统在间歇性的故障中保持运行。
![][image-1]

我们不可能建立一个持续可用、顺序一致并能容忍任何分区故障的一般数据存储。我们只能建立一个具有这三个属性中任何两个的系统。因为，为了保持一致，所有节点都应该以相同的顺序看到相同的更新集。但是，如果网络遭受分区，在客户从最新的分区读取后，在从过时的分区读取前，一个分区的更新可能无法到达其他分区。为了应对这种可能性，唯一能做的就是停止为来自过期分区的请求提供服务，但这样一来，服务就不再是100%可用的了。

[image-1]:	https://tva1.sinaimg.cn/large/008i3skNly1gr4zhjvjkuj30my0k4qba.jpg