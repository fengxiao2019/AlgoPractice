Paxos 共识算法

用于实现容错分布式系统的Paxos算法一直被认为是难以理解的，也许是因为最初的介绍对许多读者来说是希腊语。事实上，它是最简单和最明显的分布式算法之一。其核心是一种共识算法--的 "协同 "算法。下一节显示，这种共识算法几乎不可避免地遵循我们希望它满足的属性。最后一节解释了完整的Paxos算法，它是通过将共识直接应用于构建分布式系统的状态机方法而得到的--这种方法应该是众所周知的，因为它是可能是分布式系统理论中最常被引用的文章的主题。


假设有一个可以提出数值的进程集合。共识算法确保在提议的价值中选择一个。如果没有提出任何价值，那么就不应该选择任何价值。如果已经选择了一个值，那么进程应该能够了解所选择的值。共识的安全要求是。
- 只有一个被提议的值可以被选择。
- 只有一个值被选择，并且
- 进程永远不会知道某个值已被选择，除非这个值实际上已被选择。

我们不会试图指定精确的有效性要求。然而，我们的目标是 确保一些建议的值最终被选中，如果一个值已经被选中，那么一个进程最终可以学到这个值。
我们让共识算法中的三个角色由三类代理来完成 
类代理：提议者、接受者和学习者。在一个实现中，一个进程可以充当不止一个代理，但从代理到进程的映射在这里并不涉及。代理人到进程的映射在这里并不关心。

假设代理可以通过发送消息来相互交流。我们使用惯常的异步、非拜占庭模型，其中：
代理人以任意的速度运行，可能通过停止而失败，也可能重新启动。由于所有的代理在选择了一个值后可能会失败，然后重新启动，除非一些信息可以被已经失败和重新启动的代理记住，否则解决方案是不可能的。
- 信息的传递可能需要任意长的时间，可能被复制，也可能丢失，但它们不会被破坏。

选择一个价值的最简单方法是有一个接受者代理。一个提议者向接受者发送一个提议，接受者选择它收到的第一个提议值。虽然简单，但这种解决方案并不令人满意，因为接受者的失败使得任何进一步的进展都不可能。
因此，让我们尝试另一种选择价值的方式。我们不使用单一的接受者，而使用多个接受者代理。一个提议者向一组接受者发送一个提议的价值。一个接受者可以接受提议的价值。当有足够多的接受者接受该值时，该值就被选中了。多大才算足够大？为了确保只选择一个单一的值，我们可以让一个足够大的集合由任何多数代理人组成。因为任何两个多数派都至少有一个共同的接受者，如果一个接受者最多只能接受一个价值，这就可以了。(有一个明显的多数人的泛化，已经在许多论文中被观察到，显然是从开始的)。
在没有失败或信息丢失的情况下，我们希望一个价值被选择，即使只有一个提议者提出一个价值。这就提出了一个要求。

P1. 一个接受者必须接受它收到的第一个提议。但是这个要求引起了一个问题。不同的提议者可能在同一时间提出几个价值，从而导致一种情况，即每个接受者都接受了一个价值，但没有一个价值被他们中的大多数接受。即使只有两个提议的价值，如果每个价值都被大约一半的接受者所接受，一个接受者的失败会使我们无法了解哪个价值被选中。

