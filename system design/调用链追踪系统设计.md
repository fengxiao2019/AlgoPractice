# 论文导读
##  [So, you want to trace your distributed system? ][1]
调用链追踪系统需要解决的问题归类
异常检测。
分布式剖析。分布式剖析的目标是识别缓慢的组件或功能。
三种方法：
大多数端到端追踪基础设施使用三种方法中的一种来**识别因果关系的活动**：元数据传播、模式或黑箱推理。
- Metadata propagation: 
所有基于元数据传播的实现都能识别单个功能或跟踪点之间的因果关系，这些功能或跟踪点类似于日志信息，记录了系统中某一特定点在某一特定时间被达到的事实。为了将运行时间的开销（例如，响应时间和吞吐量的减慢）保持在最低限度，以便追踪可以 "一直在进行"，这一类的大多数追踪基础设施使用抽样，只收集少量的追踪点或工作流程。
- Schema-based:
不传播元数据，而是要求开发者编写时间连接模式，在自定义编写的日志信息中暴露的变量之间建立因果关系。基于模式的方法与采样不兼容，因为它们将确定什么是因果关系推迟到所有日志收集之后。因此，它们的可扩展性比元数据传播方法差。
- Black-box inference:
他们通过从预先存在的日志中关联变量或时间来推断因果关系，或者做出简化的假设。尽管在不修改软件的情况下获得端到端追踪的想法很吸引人，但这些方法在面对异步行为（如缓存、事件驱动系统）、并发、聚合或代码特定的设计模式（如2-3存储编码）时，无法正确归因，而这些都是分布式系统中常见的。

软件组件的工作是识别分布式系统中的工作，保留所选择的**因果关系**，限制开销，可选择将跟踪数据持续存储，创建跟踪，并向开发者展示跟踪。
它们包括:
- 各个跟踪点
- 因果追踪机制
- 采样机制
- 存储组件
- 跟踪构建代码
- 展示层
开发这样一个基础设施需要回答两个概念性的设计问题
- 哪些因果关系应该被保存下来？保留所有的因果关系会导致过多的开销，但保留错误的因果关系会产生无用的痕迹。
- 应该用什么模型来表达关系？有向无环树，表达顺序的、并发的或递归的调用/回复模式。

[1]:	https://www.pdl.cmu.edu/PDL-FTP/SelfStar/CMU-PDL-14-102.pdf